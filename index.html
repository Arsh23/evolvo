<html>

<head>
    <link href="https://fonts.googleapis.com/css?family=Amatica+SC|Bungee+Hairline|Josefin+Sans|Maven+Pro|Poiret+One|Raleway|Space+Mono|Titillium+Web" rel="stylesheet">
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <!-- d3.js -->
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3-ease.v1.min.js"></script>
    <!-- custom css -->
    <link rel=stylesheet type=text/css href="css/main.css">

</head>

<style>
    .graph {
        width: 100%;
        height: 200px;
    }

    .arc text {
        font: 10px sans-serif;
        text-anchor: middle;
    }

    .arc path {
        /*stroke: #fff;*/
    }
</style>

<body>

    <!-- <div class='numbers'>
        <center>
            <div class='num'>
                <p class='num-text'>8704

                    <p class='num-subtext'>Phones</p>

            </div>
            <div class='num'>
                <p class='num-text'>22

                    <p class='num-subtext'>Years</p>
            </div>
            <div class='num'>
                <p class='num-text'>108

                    <p class='num-subtext'>Brands</p>

            </div>
        </center>
    </div> -->

    <div class='graph'></div>
    <script>
        var dataset = [{
            label: 'Brands',
            count: 20,
            color: '#FF6961'
        }, {
            label: 'Years',
            count: 10,
            color: '#BA68C8'
        }, {
            label: 'Phones',
            count: 70,
            color: '#9FA8DA'
        }];


        //size and margin
        var basewidth = $('.graph').width()
        var baseheight = $('.graph').height()
        var margin = {
                top: 10,
                right: 10,
                bottom: 10,
                left: 10
            },
            width = basewidth - margin.left - margin.right,
            height = baseheight - margin.top - margin.bottom;
        var radius = Math.min(width, height) / 2;
        var donutwidth = 12;

        // main canvas
        var svg = d3.select('.graph')
            .append('svg')
            .attr('width', width + margin.left + margin.right)
            .attr('height', height + margin.top + margin.bottom);
        var canvas = svg.append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
            .append('g')
            .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')');

        var color = d3.scale.category20b();
        var arc = d3.svg.arc()
            .innerRadius(radius - donutwidth)
            .outerRadius(radius)
            // .startAngle(function(d) { return d.startAngle + Math.PI/2; })
            // .endAngle(function(d) { return d.endAngle + Math.PI/2; });

        var pie = d3.layout.pie()
            .value(function(d) {
                return d.count;
            })
            .padAngle(.08)
            .sort(null);
        //
        // var g = canvas.selectAll('path')
        //     .data(pie(dataset))
        //     .enter()
        // var ease= d3.easeExpOut()

        var g = canvas.selectAll(".arc")
            .data(pie(dataset))
            .enter()
            .append("g")
            .attr("class", "arc");

        g.append('path')
            // .attr('d', arc)
            .attr('fill', function(d, i) {
                return d.data.color;
            })
            .transition()
            // .ease(ease)
            .duration(4000)
            .attrTween("d", tweenPie);

        function tweenPie(b) {
            var i = d3.interpolate({
                startAngle: 0,
                endAngle: 0
            }, b);
            return function(t) {
                return arc(i((d3.easeCircleInOut(t))));
            };
        }








        // .transition()
        // .delay(function(d, i) {
        //     return (i+1) * 500;
        // })
        // .ease("linear")
        // .duration(500)
        // .attrTween('d', function(d) {
        //     var i = d3.interpolate(d.startAngle , d.endAngle);
        //     return function(t) {
        //         d.endAngle = i(t);
        //         return arc(d);
        //     }
        // });
    </script>


    <div class='heading'>
        <p class='heading-text'>The evolution of mobiles</p>
    </div>

    <div class='subtext'>
        <p class='subtext-text'>A data visualization experiment to analyze and explore the evolution of mobile phones
            <br> through the years. Data from gsmarena.com</p>
    </div>


</body>

</html>
